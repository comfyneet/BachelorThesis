@using System.Text
@using RiceDoctor.OntologyManager
@using Attribute = RiceDoctor.OntologyManager.Attribute
@model RiceDoctor.OntologyManager.Attribute
@{

    var attributes = (IReadOnlyCollection<Attribute>) ViewData["Attributes"];
    ViewData["Title"] = "Thuộc tính " + Model;
}

<div class="row">
    <div class="col-md-3">
        <nav clas="navbar navbar-inverse">
            <div class=" bg-teal">
                @if (attributes != null)
                {
                    <ul class="nav nav-pills nav-stacked">
                        @foreach (var attribute in attributes)
                        {
                            <li class="nav-item">
                                @Html.ActionLink(attribute.ToString(), "Attribute", "Ontology", new {attributeName = attribute.Id})
                                @if (attribute == Model)
                                {
                                    @: (this)
                                }
                            </li>
                        }
                    </ul>
                }
                else
                {
                    @:<p>Không tìm thấy</p>
                }
            </div>
        </nav>
    </div>
    <div class="col-md-9">
        <h2>@ViewData["Title"]</h2>

        @if (Model != null)
        {
            <section>
                <h4>Kiểu dữ liệu của @Model</h4>
                @if (Model.Range != null)
                {
                    <p>
                        @Model.Range

                        @if (Model.Range == DataType.Enumerated)
                        {
                            var valuesSb = new StringBuilder();
                            valuesSb.Append('(');
                            for (var i = 0; i < Model.EnumeratedValues.Count; ++i)
                            {
                                if (i > 0)
                                {
                                    valuesSb.Append(',');
                                }
                                valuesSb.Append(" " + Model.EnumeratedValues[i]);
                            }
                            valuesSb.Append(')');
                            valuesSb.ToString();
                        }
                    </p>
                }
                else
                {
                    @:<p>không tìm thấy</p>
                }
            </section>

            <hr/>

            <section>
                <h4>Chủ thể của @Model</h4>
                @if (Model.GetAllDomains() != null)
                {
                    foreach (var allDomain in Model.GetAllDomains())
                    {
                        <p>
                            <a asp-controller="Ontology" asp-action="Class" asp-route-className="@allDomain.Id">@allDomain</a>
                            @if (Model.GetDirectDomains()?.Contains(allDomain) == true)
                            {
                                @:(trực tiếp)
                            }
                        </p>
                    }
                }
                else
                {
                    @:<p>Không tìm thấy</p>
                }
            </section>
        }
    </div>
</div>